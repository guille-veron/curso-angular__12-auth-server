"use strict";(self.webpackChunkauthApp=self.webpackChunkauthApp||[]).push([[592],{6077:(M,c,e)=>{e.d(c,{e:()=>m});var _=e(4522),h=e(7384),s=e(4753),u=e(2835),l=e(2997),E=e(8260),i=e(3556);let m=(()=>{class r{constructor(o){this.http=o,this.baseUrl=E.N.baseUrl}get usuario(){return Object.assign({},this._usuario)}signup(o){return this.http.post(`${this.baseUrl}/auth/new`,o).pipe((0,h.b)(t=>{t.ok&&localStorage.setItem("token",t.token)}),(0,s.U)(t=>t.ok),(0,u.K)(t=>(0,l.of)(t.error.msg)))}login(o,a){return this.http.post(`${this.baseUrl}/auth`,{email:o,password:a}).pipe((0,h.b)(n=>{n.ok&&localStorage.setItem("token",n.token)}),(0,s.U)(n=>n.ok),(0,u.K)(n=>(0,l.of)(n.error.msg)))}validarToken(){const o=`${this.baseUrl}/auth/renew`,a=(new _.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(o,{headers:a}).pipe((0,s.U)(t=>(localStorage.setItem("token",t.token),this._usuario={email:t.email,name:t.name,uid:t.uid},t.ok)),(0,u.K)(t=>(0,l.of)(!1)))}logout(){localStorage.removeItem("token")}}return r.\u0275fac=function(o){return new(o||r)(i.LFG(_.eN))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);